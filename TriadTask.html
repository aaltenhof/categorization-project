<!DOCTYPE html>
<html>
  <head>
    <title>triad matching experiment</title>
    <script src="jspsych-6.1.0/jspsych.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-survey-text.js"></script>
    <link href="jspsych-6.1.0/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    <script src="jspsych-6.1.0/plugins/jspsych-image-keyboard-response.js"></script>   
    <script src="jspsych-6.1.0/plugins/jspsych-survey-multi-choice.js"></script>
    <script src="jquery-ui-1.11.4/external/jquery/jquery.js"></script>
    <script src="jquery-ui-1.11.4/jquery-ui.js"></script>
    <link rel="stylesheet" href="jquery-ui-1.11.4/jquery-ui.css">

  </head>
  <body></body>
  <script>

     /*welcome message */
    var welcome = {
      type: "html-keyboard-response",
      stimulus: "Thank you for participating in this experiment. Press any key to begin."
    };
    

    /*Collect participant demographics*/
    var age = {
    type: "survey-text",
    questions: [
      {prompt: 'How old are you?', columns: 3, required: true, name: 'Age'},
    ],
  };

  var page_1_options = ["Male", "Female", "Non-binary"];
  var page_2_options = ["Right", "Left", "Ambidextrous"];

  var multi_choice_block = {
    type: "survey-multi-choice",
    questions: [
      {prompt: "What is your gender?", name: 'Gender', options: page_1_options, required:true}, 
      {prompt: "What is your dominant hand?", name: 'Handedness', options: page_2_options, required: true}
    ],
  };

  /* Pre-Instructions */
var instructions = {
      type: "html-keyboard-response",
      stimulus: "Welcome! You are on a mission to an alien planet and must acquaint yourself with the things you might encounter there. In a moment you will be shown a collection of images over two slides. These images depict things from the alien planet. You will have a minute for each slide to familiarize yourself with the objects. Press any key when you are ready to begin."
    }; 

  var ran = Math.random();
    var RandImg1 = function() {if (ran <= .16) {
        return "pic1.png";
        } else if (ran <= .33) {
          return "pic3.png";
        } else if (ran <= .50) {
            return "pic5.png";
        } else if (ran <= .66) {
            return "pic7.png";
        } else if (ran <= .82) {
            return "pic9.png";
        } else {
        return "pic11.png";
        }
    };

    var RandImg2 = function () {
        if (ran <= .16) {
        return "pic2.png";
        } else if (ran <= .33) {
          return "pic4.png";
        } else if (ran <= .50) {
            return "pic6.png";
        } else if (ran <= .66) {
            return "pic8.png";
        } else if (ran <= .82) {
            return "pic10.png";
        } else {
        return "pic12.png";
        }
      };

    
      /* Interactions */
    var img3 = {
      type: 'image-keyboard-response',
      prompt: "<br>Sometimes the objects interact. Please familiarize yourself with how these interactions work.",
      trial_duration: 60000,
      response_ends_trial: false,
      stimulus: "inter.png",
      choices: [' ']
    };

      /* Images Set 1 */
    var img1 = {
        type: 'image-keyboard-response',
        prompt: " ",
        trial_duration: 60000,
        response_ends_trial: false,
        stimulus:RandImg1,
        choices: [' ']
    };

      /* Images Set 2 */
    var img2 = {
      type: 'image-keyboard-response',
      prompt: " ",
      trial_duration: 60000,
      response_ends_trial: false,
      stimulus: RandImg2,
      choices: [' ']
    };

var test_stimuli = [ 
   {stimulus: 'triad/quaddles.png'},
    {stimulus: 'triad/moyi.png'},
    {stimulus: 'triad/dak.png'},
    {stimulus: 'triad/plinket.png'},
    {stimulus: 'triad/pov.png'},
    {stimulus: 'triad/siba.png'}
]
var all_trials = jsPsych.randomization.repeat(test_stimuli,1);

var test_block ={
  type: 'image-keyboard-response',
  choices: ['l','r'],
  prompt: "<br> Which object goes with the object on top? Press 'R' for the object on the right and 'L' for the object on the left.",
  randomize_order: true,
  timeline: all_trials
  }

     /* start the experiment */
     jsPsych.init({
      timeline: [welcome, age, multi_choice_block, instructions, img1, img2, img3, test_block],
      on_finish: function(){jsPsych.data.displayData();}
    });
    
  </script>
</html>
