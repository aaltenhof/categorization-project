<!DOCTYPE html>
<html>
  <head>
    <title>My experiment</title>
    <script src="jspsych-6.1.0/jspsych.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-survey-text.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-survey-multi-choice.js"></script>
    <script src="jspsych-6.1.0/plugins/jspsych-image-keyboard-response.js"></script>
    <link href="jspsych-6.1.0/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    <script src="jspsych-6.1.0/plugins/jspsych-survey-multi-choice.js"></script>
    <script src="jquery-ui-1.11.4/external/jquery/jquery.js"></script>
    <script src="jquery-ui-1.11.4/jquery-ui.js"></script>
    <link rel="stylesheet" href="jquery-ui-1.11.4/jquery-ui.css">
  <script src="jspsych-6.1.0/plugins/jspsych-free-sort.js"></script>

  </head>
  <body></body>
  <script>


    /*welcome message */
    var welcome = {
      type: "html-keyboard-response",
      stimulus: "Thank you for participating in this experiment. Press any key to begin."
    }; 

    /*Collect participant demographics*/
    var age = {
    type: "survey-text",
    questions: [
      {prompt: 'How old are you?', columns: 3, required: true, name: 'Age'},
    ],
  };

  var page_1_options = ["Male", "Female", "Non-binary"];
  var page_2_options = ["Right", "Left", "Ambidextrous"];

  var multi_choice_block = {
    type: "survey-multi-choice",
    questions: [
      {prompt: "What is your gender?", name: 'Gender', options: page_1_options, required:true}, 
      {prompt: "What is your dominant hand?", name: 'Handed-ness', options: page_2_options, required: true}
    ],
  };

    /* Pre-Instructions */
    var instructions = {
      type: "html-keyboard-response",
      stimulus: "Welcome! You are on a mission to an alien planet and must acquaint yourself with the things you might encounter there. In a moment you will shown a collection of images over two slides. These images depict things from the alien planet. You will have a minute for each slide to familiarize yourself with the objects. Press any key when you are ready to begin."
    };

    var ran = Math.random();

    /* Images Set 1 */
    var img1 = {
      type: 'image-keyboard-response',
      prompt: "",
      trial_duration: 60000,
      response_ends_trial: false,
      stimulus: function stimRan1() {
        if (ran <= .16) {
        return "pic1.png"
        } else if (ran <= .33) {
          return "pic3.png"
        } else if (ran <= .50) {
            return "pic5.png"
        } else if (ran <= .66) {
            return "pic7.png"
        } else if (ran <= .82) {
            return "pic9.png"
        } else {
        return "pic11.png"
        }
      },
      choices: [' ']
    };

      /* Images Set 2 */
      var img2 = {
      type: 'image-keyboard-response',
      prompt: "",
      trial_duration: 60000,
      response_ends_trial: false,
      stimulus: function stimRan1() {
        if (ran <= .16) {
        return "pic2.png"
        } else if (ran <= .33) {
          return "pic4.png"
        } else if (ran <= .50) {
            return "pic6.png"
        } else if (ran <= .66) {
            return "pic8.png"
        } else if (ran <= .82) {
            return "pic10.png"
        } else {
        return "pic12.png"
        }
      },
      choices: [' ']
    };

      /* Interactions */
      var img3 = {
      type: 'image-keyboard-response',
      prompt: "Sometimes the objects interact. Please familiarize yourself with how these interactions work.",
      trial_duration: 60000,
      response_ends_trial: false,
      stimulus: "pic3.png",
      choices: [' ']
    };

    /*Categorization task*/
    var trial = {
      type: 'free-sort',
      stimuli: ["cir/gorp.png","cir/sibnit.png","cir/fincur.png","cir/quaddles.png", "cir/rizb.png","cir/moyi.png", "cir/bluko.png", "cir/snater.png", "cir/dak.png","cir/pov.png","cir/monim.png","cir/vidri.png","cir/siba.png","cir/ruxe.png", "cir/plinket.png", "cir/fiwi.png", "cir/oorm.png", "cir/obah.png"],
      prompt: "Click and drag the images below to sort them into groups however you see fit. You can make as few or as many groups as you like, with as few or as many items as you like. To create a group, simply ensure that all the images you want to be in that group are touching. (It’s a good idea to make them overlap to be sure of this.)",
      sort_area_height: 700,
      sort_area_width: 1375,
      stim_height: 150,
      stim_width: 150
    }


    /* start the experiment */
    jsPsych.init({
      timeline: [welcome, age, multi_choice_block, instructions, img1, img2, img3, trial],
      on_finish: function(){jsPsych.data.displayData();}
    });
    
  </script>